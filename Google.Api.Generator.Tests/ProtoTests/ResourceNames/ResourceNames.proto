syntax = "proto3";

package testing.resourcenames;

option csharp_namespace = "Testing.ResourceNames";

import "google/api/client.proto";
import "google/api/resource.proto";
import "google/api/field_behavior.proto";

service ResourceNames {
  option (google.api.default_host) = "resourcenames.example.com";

  // Test top-level resource definition.
  rpc SimpleMethod(SimpleResource) returns(Response) {
    option (google.api.method_signature) = "name";
  }

  // Test resource definition inlined in the proto message.
  rpc SimpleInlineMethod(SimpleInlineResource) returns(Response) {
    option (google.api.method_signature) = "name";
  }

  // Test repeated resource.
  rpc SimpleRepeatedMethod(SimpleRepeatedResource) returns(Response) {
    option (google.api.method_signature) = "names";
  }

  // Test wilcard resource.
  rpc WildcardMethod(WildcardResource) returns(Response) {
    option (google.api.method_signature) = "name,names,required_single,required_repeated";
  }

  // Test multiple cases of resoure-names.
  // All combinations of optional/required and single/repeated.
  // Using field names that are not "name" or "names".
  rpc MultiCaseMethod(MultiCaseRequest) returns (Response) {
    option (google.api.method_signature) =
	  "optional_single,optional_repeated,required_single,required_repeated";
  }
}

option (google.api.resource_definition) = {
  symbol: "SimpleResource",
  pattern: "items/{item_id}"
};

message SimpleResource {
  string name = 1 [(google.api.resource_reference) = "SimpleResource"];
}

message SimpleInlineResource {
  string name = 1 [(google.api.resource).pattern = "items1/{item1_id}/items2/{item2_id}"];
}

message SimpleRepeatedResource {
  repeated string names = 1 [(google.api.resource_reference) = "SimpleResource"];
}

option (google.api.resource_definition) = {
  symbol: "WildcardResource",
  pattern: "*"
};

message WildcardResource {
  string name = 1 [(google.api.resource_reference) = "WildcardResource"];
  repeated string names = 2 [(google.api.resource_reference) = "WildcardResource"];
  string required_single = 3 [(google.api.resource_reference) = "WildcardResource", (google.api.field_behavior) = REQUIRED];
  repeated string required_repeated = 4 [(google.api.resource_reference) = "WildcardResource", (google.api.field_behavior) = REQUIRED];
}

message MultiCaseRequest {
  string optional_single = 1 [(google.api.resource_reference) = "SimpleResource"];
  repeated string optional_repeated = 2 [(google.api.resource_reference) = "SimpleResource"];
  string required_single = 3 [(google.api.resource_reference) = "SimpleResource", (google.api.field_behavior) = REQUIRED];
  repeated string required_repeated = 4 [(google.api.resource_reference) = "SimpleResource", (google.api.field_behavior) = REQUIRED];
}

message Response {
}

option (google.api.resource_definition) = {
  symbol: "CheckIdSuffixResource",
  pattern: "with_suffix/{with_suffix_id}/no_suffix/{no_suffix}"
};
